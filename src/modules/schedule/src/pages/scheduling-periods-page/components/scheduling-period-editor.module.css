/**
 * Scheduling Period Editor Styles
 * Custom styles for the PrimeReact Calendar
 */

/* Calendar input field styling */
.calendarInput {
    width: 100%;
}

.calendarInput :global(.p-inputtext) {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 0.9rem;
    border-radius: var(--mantine-radius-md);
    border: 1px solid var(--mantine-color-default-border);
    background-color: var(--mantine-color-default);
    color: var(--mantine-color-text);
    transition: border-color 150ms ease, box-shadow 150ms ease;
}

.calendarInput :global(.p-inputtext:focus) {
    border-color: var(--mantine-primary-color-filled);
    box-shadow: 0 0 0 2px var(--mantine-primary-color-light);
    outline: none;
}

.calendarInput :global(.p-inputtext::placeholder) {
    color: var(--mantine-color-placeholder);
}

/* Calendar icon button */
.calendarInput :global(.p-datepicker-trigger) {
    background-color: transparent;
    border: none;
    color: var(--mantine-color-dimmed);
    padding: 0.75rem;
}

.calendarInput :global(.p-datepicker-trigger:hover) {
    background-color: var(--mantine-color-default-hover);
    color: var(--mantine-color-text);
}

/* Calendar panel (dropdown) styling */
.calendarPanel {
    background-color: var(--mantine-color-body) !important;
    border: 1px solid var(--mantine-color-default-border) !important;
    border-radius: var(--mantine-radius-lg) !important;
    box-shadow: var(--mantine-shadow-xl) !important;
    padding: 1rem !important;
    /* TouchUI constraints */
    width: 360px !important;
    min-width: 0 !important;
    /* Override PrimeReact defaults */
    max-width: 90vw !important;
}

/* Calendar header (month/year navigation) */
.calendarPanel :global(.p-datepicker-header) {
    background-color: transparent !important;
    border-bottom: 1px solid var(--mantine-color-default-border) !important;
    padding-bottom: 0.75rem !important;
    margin-bottom: 0.75rem !important;
}

/* Ensure media query doesn't force it wide */
@media screen and (max-width: 768px) {
    .calendarPanel {
        width: 320px !important;
    }
}

/* Month/Year title */
.calendarPanel :global(.p-datepicker-title) {
    display: flex;
    gap: 0.5rem;
    justify-content: center;
}

.calendarPanel :global(.p-datepicker-month),
.calendarPanel :global(.p-datepicker-year) {
    color: var(--mantine-color-text) !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    padding: 0.25rem 0.5rem !important;
    border-radius: var(--mantine-radius-sm) !important;
}

.calendarPanel :global(.p-datepicker-month:hover),
.calendarPanel :global(.p-datepicker-year:hover) {
    background-color: var(--mantine-color-default-hover) !important;
}

/* Navigation arrows (prev/next) */
.calendarPanel :global(.p-datepicker-prev),
.calendarPanel :global(.p-datepicker-next) {
    width: 2rem !important;
    height: 2rem !important;
    color: var(--mantine-color-dimmed) !important;
    border-radius: var(--mantine-radius-md) !important;
    transition: all 150ms ease !important;
}

.calendarPanel :global(.p-datepicker-prev:hover),
.calendarPanel :global(.p-datepicker-next:hover) {
    background-color: var(--mantine-color-default-hover) !important;
    color: var(--mantine-color-text) !important;
}

/* Weekday headers */
.calendarPanel :global(.p-datepicker-weekday) {
    color: var(--mantine-color-dimmed) !important;
    font-weight: 600 !important;
    font-size: 0.8rem !important;
    padding: 0.5rem !important;
}

/* Day cells */
.calendarPanel :global(.p-datepicker-day) {
    width: 2.5rem !important;
    height: 2.5rem !important;
    border-radius: var(--mantine-radius-md) !important;
    transition: all 150ms ease !important;
}

.calendarPanel :global(.p-datepicker-day span) {
    width: 100% !important;
    height: 100% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    border-radius: var(--mantine-radius-md) !important;
}

/* ============================================
   ENABLED DAYS (Darker and bolder in both modes)
   ============================================ */
.calendarPanel :global(.p-datepicker-day:not(.p-disabled):not(.p-datepicker-other-month) span) {
    color: var(--mantine-color-text) !important;
    font-weight: 900 !important;
    border: none !important;
    background-color: transparent !important;
    visibility: visible !important;
    display: flex !important;
}

.calendarPanel :global(.p-datepicker-day:not(.p-disabled):not(.p-datepicker-other-month)) {
    background-color: transparent !important;
    visibility: visible !important;
    display: table-cell !important;
}

/* Dark mode support for enabled days */
@media (prefers-color-scheme: dark) {
    .calendarPanel :global(.p-datepicker-day:not(.p-disabled):not(.p-datepicker-other-month) span) {
        color: var(--mantine-color-text) !important;
    }
}

/* HOVER on Enabled Days */
.calendarPanel :global(.p-datepicker-day:not(.p-disabled):not(.p-datepicker-other-month):hover span) {
    background-color: var(--mantine-primary-color-light) !important;
    cursor: pointer !important;
}

/* ============================================
   SELECTED DAYS (Blue Filled)
   ============================================ */
.calendarPanel :global(.p-datepicker-day-selected span),
.calendarPanel :global(.p-highlight),
.calendarPanel :global(.p-datepicker-today.p-datepicker-day-selected span) {
    background-color: var(--mantine-primary-color-filled) !important;
    color: var(--mantine-color-white) !important;
    font-weight: 900 !important;
    border: none !important;
}

/* ============================================
   TODAY - Always visible, remove gray background when not selected
   ============================================ */
.calendarPanel :global(.p-datepicker-today) {
    visibility: visible !important;
    display: table-cell !important;
}

.calendarPanel :global(.p-datepicker-today:not(.p-datepicker-day-selected)) {
    background-color: transparent !important;
}

.calendarPanel :global(.p-datepicker-today) span {
    visibility: visible !important;
    display: flex !important;
}

.calendarPanel :global(.p-datepicker-today:not(.p-datepicker-day-selected)) span {
    background-color: transparent !important;
}

/* ============================================
   DISABLED DAYS (Dimmed, Gray) - Same as other month
   ============================================ */
.calendarPanel :global(.p-disabled span) {
    color: var(--mantine-color-dimmed) !important;
    font-weight: 400 !important;
    opacity: 0.25 !important;
    cursor: not-allowed !important;
    border: none !important;
    background-color: transparent !important;
}

.calendarPanel :global(.p-disabled) {
    opacity: 0.25 !important;
}

/* TODAY when DISABLED - Higher specificity to override enabled/today styling */
.calendarPanel :global(.p-datepicker-day.p-datepicker-today.p-disabled span) {
    color: var(--mantine-color-dimmed) !important;
    opacity: 0.25 !important;
    font-weight: 400 !important;
    cursor: not-allowed !important;
    background-color: transparent !important;
    border: none !important;
}

/* No hover on disabled */
.calendarPanel :global(.p-disabled:hover span) {
    background-color: transparent !important;
}

/* Other Month */
.calendarPanel :global(.p-datepicker-other-month span) {
    color: var(--mantine-color-dimmed) !important;
    opacity: 0.25 !important;
}

.calendarPanel :global(.p-datepicker-calendar) {
    width: 100% !important;
}

.calendarPanel :global(.p-datepicker-calendar td) {
    padding: 0.125rem !important;
}